"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[500],{3905:function(t,e,n){n.d(e,{Zo:function(){return d},kt:function(){return f}});var i=n(67294);function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e){if(null==t)return{};var n,i,o=function(t,e){if(null==t)return{};var n,i,o={},r=Object.keys(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}var l=i.createContext({}),s=function(t){var e=i.useContext(l),n=e;return t&&(n="function"==typeof t?t(e):a(a({},e),t)),n},d=function(t){var e=s(t.components);return i.createElement(l.Provider,{value:e},t.children)},m={inlineCode:"code",wrapper:function(t){var e=t.children;return i.createElement(i.Fragment,{},e)}},u=i.forwardRef((function(t,e){var n=t.components,o=t.mdxType,r=t.originalType,l=t.parentName,d=c(t,["components","mdxType","originalType","parentName"]),u=s(n),f=o,h=u["".concat(l,".").concat(f)]||u[f]||m[f]||r;return n?i.createElement(h,a(a({ref:e},d),{},{components:n})):i.createElement(h,a({ref:e},d))}));function f(t,e){var n=arguments,o=e&&e.mdxType;if("string"==typeof t||o){var r=n.length,a=new Array(r);a[0]=u;var c={};for(var l in e)hasOwnProperty.call(e,l)&&(c[l]=e[l]);c.originalType=t,c.mdxType="string"==typeof t?t:o,a[1]=c;for(var s=2;s<r;s++)a[s]=n[s];return i.createElement.apply(null,a)}return i.createElement.apply(null,n)}u.displayName="MDXCreateElement"},10138:function(t,e,n){n.r(e),n.d(e,{frontMatter:function(){return c},contentTitle:function(){return l},metadata:function(){return s},toc:function(){return d},default:function(){return u}});var i=n(87462),o=n(63366),r=(n(67294),n(3905)),a=["components"],c={id:"atomic-commitment-notification",title:"Atomic Commitment Notification"},l=void 0,s={unversionedId:"learn/sharding/atomic-commitment-notification",id:"learn/sharding/atomic-commitment-notification",title:"Atomic Commitment Notification",description:"How to ensure a minimun of confirmation from the storage nodes to ensure the data availability of a given transaction.",source:"@site/docs/learn/sharding/atomic-commitment-notification.md",sourceDirName:"learn/sharding",slug:"/learn/sharding/atomic-commitment-notification",permalink:"/archethic-docs/learn/sharding/atomic-commitment-notification",tags:[],version:"current",lastUpdatedAt:1645474580,formattedLastUpdatedAt:"2/21/2022",frontMatter:{id:"atomic-commitment-notification",title:"Atomic Commitment Notification"},sidebar:"docs",previous:{title:"Beacon Explorer",permalink:"/archethic-docs/learn/sharding/beacon-chain/explorer"},next:{title:"P2P",permalink:"/archethic-docs/learn/p2p"}},d=[{value:"Heuristic solution",id:"heuristic-solution",children:[{value:"Nested replications",id:"nested-replications",children:[],level:3},{value:"Client notifications",id:"client-notifications",children:[],level:3}],level:2},{value:"Further improvements",id:"further-improvements",children:[],level:2}],m={toc:d};function u(t){var e=t.components,n=(0,o.Z)(t,a);return(0,r.kt)("wrapper",(0,i.Z)({},m,n,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"How to ensure a minimun of confirmation from the storage nodes to ensure the data availability of a given transaction.\nIf we are not providing this kind of mechanism, we can end up into a network split / mistmatch where shards and beacon aren't cross linked.\nAlso we do not want to overload the beacon chain by broadcasting it with hundred of messages for single transaction summary."),(0,r.kt)("h2",{id:"heuristic-solution"},"Heuristic solution"),(0,r.kt)("p",null,"Each validation node will notify the replications nodes in charge, and wait their confirmations to attest the validity\nand the availability of the transaction in the shard before to notify the beacon chain and the welcome node."),(0,r.kt)("p",null,"In 1st approx, a single notification from the validation nodes is sufficient to ensure the availability. This attestation will contains a list of signatures,\nfrom the replication nodes, to status about their commitment to store the transaction.\nHowever, further attestations and confirmations can be checked later during the time, to provide more security."),(0,r.kt)("p",null,"For example, a beacon chain receiving 1 attestation from a validation node including X storage confirmations\nwill be valid as 3 attestations with their respective confirmations."),(0,r.kt)("h3",{id:"nested-replications"},"Nested replications"),(0,r.kt)("p",null,"Moreover, when we are dealing with recipients for transfer or smart contract calls, we want to support the recipients shards will be notified\nonly when the main transaction is validated and stored.\nSo for example, the replication can be splitted by levels: ","[ Main Chain ]"," -> ","[ Recipient Chains]"),(0,r.kt)("p",null,"Then the welcome node will be notified by a validation node with a given number of replica confirmations."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"          V1\n        /  |  \\\nChain: S1  S2  S3\n       /     |   \\\n      Recipient Shards\n")),(0,r.kt)("h3",{id:"client-notifications"},"Client notifications"),(0,r.kt)("p",null,"When a transaction is submitted, the welcome node will transfer this transaction to the validation nodes and return to the client a pending status.\nThe client would have to subscribe to notifications about the completion of the transaction.\nOnce the transaction will be validated and the validation nodes by notifing the welcome will notify the clients asynchronously."),(0,r.kt)("h2",{id:"further-improvements"},"Further improvements"),(0,r.kt)("p",null,"To reduce the overall size of the attestations and confirmations we can support signature aggregation or cosigning to embed a single transaction with a bitfield\nto indicate which nodes signed the transaction replication, which will be signed over by a validation node."))}u.isMDXComponent=!0}}]);